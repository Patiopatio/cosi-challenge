{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/patrycjabuczkowska/Documents/Patio/Dev-projects/cosi-challenge/pages/checkin.tsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useRouter } from \"next/router\";\nimport axios from \"axios\";\nimport Input from \"../components/atoms/input\";\nimport Spinner from \"../components/atoms/spinner\";\nexport default function Home() {\n  const router = useRouter();\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm({\n    mode: \"onBlur\"\n  });\n  const {\n    0: firstName,\n    1: setFirstName\n  } = useState(\"\");\n  const {\n    0: lastName,\n    1: setLastName\n  } = useState(\"\");\n  const {\n    0: nationality,\n    1: setNationality\n  } = useState(\"austria\");\n  const {\n    0: email,\n    1: setEmail\n  } = useState(\"\");\n  const {\n    0: phoneNumber,\n    1: setPhoneNumber\n  } = useState(\"\");\n  const {\n    0: passportNumber,\n    1: setPassportNumber\n  } = useState(\"\");\n  const {\n    0: birthDate,\n    1: setBirthDate\n  } = useState(new Date());\n  const {\n    0: birthPlace,\n    1: setBirthPlace\n  } = useState(\"\");\n  const {\n    0: country,\n    1: setCountry\n  } = useState(\"\");\n  const {\n    0: city,\n    1: setCity\n  } = useState(\"\");\n  const {\n    0: address,\n    1: setAddress\n  } = useState(\"\");\n  const {\n    0: passportIssueDate,\n    1: setPassportIssueDate\n  } = useState(new Date());\n  const {\n    0: passportExpiryDate,\n    1: setPassportExpiryDate\n  } = useState(new Date());\n  const {\n    0: passportIssueCountry,\n    1: setPassportIssueCountry\n  } = useState(\"\");\n  const {\n    0: passportIssueCity,\n    1: setPassportIssueCity\n  } = useState(\"\");\n  const {\n    0: isTAndCAccepted,\n    1: setIsTAndCAccepted\n  } = useState(false);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: isReviewed,\n    1: setIsReviewed\n  } = useState(false);\n\n  const onSubmit = async data => {\n    if (isReviewed) {\n      try {\n        setLoading(true);\n        const response = await axios.post(\"/api/passenger/checkin\", {\n          firstName,\n          lastName,\n          nationality,\n          email,\n          phoneNumber,\n          passportNumber,\n          birthDate,\n          birthPlace,\n          country,\n          city,\n          address,\n          passportIssueDate,\n          passportExpiryDate,\n          passportIssueCountry,\n          passportIssueCity,\n          isTAndCAccepted\n        });\n        setLoading(false);\n        router.push(\"confirmation\");\n      } catch (err) {\n        console.error(err);\n      }\n\n      setLoading(false);\n    }\n\n    window.scrollTo(0, 0);\n    setIsReviewed(true);\n  };\n\n  useEffect(() => {\n    let ignore = false;\n\n    const fetchUser = async () => {\n      try {\n        setLoading(true);\n        const response = await axios(\"/api/passenger\");\n        setLastName(response.data.passenger.lastName);\n\n        if (!ignore) {//////////////////////////////////\n        }\n      } catch (err) {\n        console.error(err);\n      }\n\n      setLoading(false);\n    };\n\n    fetchUser();\n    return () => {\n      ignore = true;\n    };\n  }, []);\n  const headline = isReviewed ? \"Please review your information\" : `Hi Mr. ${lastName}!`;\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"container m-auto h-full py-2 px-4 md:px-16 w-full md:w-2/3\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"h-full\",\n      onSubmit: handleSubmit(onSubmit),\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"mb-4 text-xl md:text-2xl\",\n        children: headline\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col md:flex-row md:space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1\",\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            className: \"mb-2\",\n            type: \"text\",\n            value: firstName,\n            onChange: event => setFirstName(event.target.value),\n            placeholder: \"Jon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            className: \"mb-2\",\n            type: \"text\",\n            value: lastName,\n            onChange: event => setLastName(event.target.value),\n            placeholder: \"Doe\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              type: \"select\",\n              onChange: event => setNationality(event.target.value),\n              value: nationality,\n              className: \" block appearance-none w-full bg-white hover:border-gray-500 px-3 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"austria\",\n                children: \"Austria\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"belgium\",\n                children: \"Belgium\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"france\",\n                children: \"France\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"greece\",\n                children: \"Greece\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"spain\",\n                children: \"Spain\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"fill-current h-4 w-4\",\n                xmlns: \"http://www.w3.org/2000/svg\",\n                viewBox: \"0 0 20 20\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            className: \"mb-2\",\n            type: \"text\",\n            value: email,\n            onChange: event => setEmail(event.target.value),\n            placeholder: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            className: \"mb-2\",\n            type: \"text\",\n            value: phoneNumber,\n            onChange: event => setPhoneNumber(event.target.value),\n            placeholder: \"Phone Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this), (nationality === \"france\" || nationality == \"belgium\") && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2\",\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Birth date\", /*#__PURE__*/_jsxDEV(Input, {\n                className: \"mb-2\",\n                type: \"date\",\n                value: birthDate,\n                onChange: event => setBirthDate(event.target.value),\n                placeholder: \"Birth Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 15\n          }, this), nationality === \"france\" && /*#__PURE__*/_jsxDEV(Input, {\n            className: \"mb-2\",\n            type: \"text\",\n            value: birthPlace,\n            onChange: event => setBirthPlace(event.target.value),\n            placeholder: \"Birth Place\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1\",\n          children: [(nationality === \"austria\" || nationality == \"belgium\" || nationality == \"france\") && /*#__PURE__*/_jsxDEV(Input, {\n            className: \"mb-2\",\n            type: \"text\",\n            value: country,\n            onChange: event => setCountry(event.target.value),\n            placeholder: \"Country of residence\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 15\n          }, this), (nationality === \"austria\" || nationality == \"belgium\" || nationality == \"spain\" || nationality == \"france\") && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              className: \"mb-2\",\n              type: \"text\",\n              value: city,\n              onChange: event => setCity(event.target.value),\n              placeholder: \"City of residence\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 17\n            }, this)\n          }, void 0, false), (nationality === \"spain\" || nationality == \"belgium\") && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              className: \"mb-2\",\n              type: \"text\",\n              value: address,\n              onChange: event => setAddress(event.target.value),\n              placeholder: \"Street name, house no\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 17\n            }, this)\n          }, void 0, false), nationality === \"greece\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Passport Issue Date\", /*#__PURE__*/_jsxDEV(Input, {\n                type: \"date\",\n                value: passportIssueDate,\n                onChange: event => setPassportIssueDate(event.target.value),\n                placeholder: \"Passport date of issue\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              className: \"mt-2 mb-2\",\n              type: \"text\",\n              value: passportIssueCountry,\n              onChange: event => setPassportIssueCountry(event.target.value),\n              placeholder: \"Passport country of issue\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true), nationality === \"austria\" || nationality == \"greece\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              className: \"mb-2\",\n              type: \"text\",\n              value: passportIssueCity,\n              onChange: event => setPassportIssueCity(event.target.value),\n              placeholder: \"Passport city of issue\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 19\n            }, this)\n          }, void 0, false), /*#__PURE__*/_jsxDEV(Input, {\n            className: \"mb-2\",\n            type: \"text\",\n            value: passportNumber,\n            onChange: event => setPassportNumber(event.target.value),\n            placeholder: \"Passport Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this), (nationality === \"austria\" || nationality == \"greece\") && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm text-gray-600\",\n              children: [\"Passport Expiry Date\", /*#__PURE__*/_jsxDEV(Input, {\n                className: \"mb-2\",\n                type: \"date\",\n                value: passportExpiryDate,\n                onChange: event => setPassportExpiryDate(event.target.value),\n                placeholder: \"Passport expiry date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 17\n            }, this)\n          }, void 0, false)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), !isReviewed && /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          className: \"mr-2 mb-2\",\n          checked: isTAndCAccepted,\n          onChange: e => setIsTAndCAccepted(e.target.checked)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 13\n        }, this), \"Accept T&C\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"w-full flex justify-between mt-4 text-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded shadow\",\n        children: [!isReviewed ? \"Continue\" : \"Check-In\", loading && /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/Users/patrycjabuczkowska/Documents/Patio/Dev-projects/cosi-challenge/pages/checkin.tsx"],"names":["React","useEffect","useState","useForm","useRouter","axios","Input","Spinner","Home","router","register","handleSubmit","errors","mode","firstName","setFirstName","lastName","setLastName","nationality","setNationality","email","setEmail","phoneNumber","setPhoneNumber","passportNumber","setPassportNumber","birthDate","setBirthDate","Date","birthPlace","setBirthPlace","country","setCountry","city","setCity","address","setAddress","passportIssueDate","setPassportIssueDate","passportExpiryDate","setPassportExpiryDate","passportIssueCountry","setPassportIssueCountry","passportIssueCity","setPassportIssueCity","isTAndCAccepted","setIsTAndCAccepted","loading","setLoading","isReviewed","setIsReviewed","onSubmit","data","response","post","push","err","console","error","window","scrollTo","ignore","fetchUser","passenger","headline","event","target","value","e","checked"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { useRouter } from \"next/router\";\nimport axios from \"axios\";\nimport Input from \"../components/atoms/input\";\nimport Spinner from \"../components/atoms/spinner\";\n\nexport default function Home() {\n  const router = useRouter();\n  const { register, handleSubmit, errors } = useForm({ mode: \"onBlur\" });\n\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [nationality, setNationality] = useState(\"austria\");\n  const [email, setEmail] = useState(\"\");\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [passportNumber, setPassportNumber] = useState(\"\");\n  const [birthDate, setBirthDate] = useState(new Date());\n  const [birthPlace, setBirthPlace] = useState(\"\");\n  const [country, setCountry] = useState(\"\");\n  const [city, setCity] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [passportIssueDate, setPassportIssueDate] = useState(new Date());\n  const [passportExpiryDate, setPassportExpiryDate] = useState(new Date());\n  const [passportIssueCountry, setPassportIssueCountry] = useState(\"\");\n  const [passportIssueCity, setPassportIssueCity] = useState(\"\");\n\n  const [isTAndCAccepted, setIsTAndCAccepted] = useState(false);\n\n  const [loading, setLoading] = useState(false);\n  const [isReviewed, setIsReviewed] = useState(false);\n\n  const onSubmit = async (data) => {\n    if (isReviewed) {\n      try {\n        setLoading(true);\n        const response = await axios.post(\"/api/passenger/checkin\", {\n          firstName,\n          lastName,\n          nationality,\n          email,\n          phoneNumber,\n          passportNumber,\n          birthDate,\n          birthPlace,\n          country,\n          city,\n          address,\n          passportIssueDate,\n          passportExpiryDate,\n          passportIssueCountry,\n          passportIssueCity,\n          isTAndCAccepted,\n        });\n        setLoading(false);\n        router.push(\"confirmation\");\n      } catch (err) {\n        console.error(err);\n      }\n      setLoading(false);\n    }\n    window.scrollTo(0, 0);\n    setIsReviewed(true);\n  };\n\n  useEffect(() => {\n    let ignore = false;\n    const fetchUser = async () => {\n      try {\n        setLoading(true);\n        const response = await axios(\"/api/passenger\");\n        setLastName(response.data.passenger.lastName);\n        if (!ignore) {\n          //////////////////////////////////\n        }\n      } catch (err) {\n        console.error(err);\n      }\n      setLoading(false);\n    };\n    fetchUser();\n    return () => {\n      ignore = true;\n    };\n  }, []);\n\n  const headline = isReviewed\n    ? \"Please review your information\"\n    : `Hi Mr. ${lastName}!`;\n\n  return (\n    <main className=\"container m-auto h-full py-2 px-4 md:px-16 w-full md:w-2/3\">\n      <form className=\"h-full\" onSubmit={handleSubmit(onSubmit)}>\n        <h1 className=\"mb-4 text-xl md:text-2xl\">{headline}</h1>\n        <div className=\"flex flex-col md:flex-row md:space-x-2\">\n          <div className=\"flex-1\">\n            <Input\n              className=\"mb-2\"\n              type=\"text\"\n              value={firstName}\n              onChange={(event) => setFirstName(event.target.value)}\n              placeholder=\"Jon\"\n            />\n            <Input\n              className=\"mb-2\"\n              type=\"text\"\n              value={lastName}\n              onChange={(event) => setLastName(event.target.value)}\n              placeholder=\"Doe\"\n            />\n            <div className=\"relative mb-2\">\n              <select\n                type=\"select\"\n                onChange={(event) => setNationality(event.target.value)}\n                value={nationality}\n                className=\" block appearance-none w-full bg-white hover:border-gray-500 px-3 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline\"\n              >\n                <option value=\"austria\">Austria</option>\n                <option value=\"belgium\">Belgium</option>\n                <option value=\"france\">France</option>\n                <option value=\"greece\">Greece</option>\n                <option value=\"spain\">Spain</option>\n              </select>\n              <div className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n                <svg\n                  className=\"fill-current h-4 w-4\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  viewBox=\"0 0 20 20\"\n                >\n                  <path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\" />\n                </svg>\n              </div>\n            </div>\n\n            <Input\n              className=\"mb-2\"\n              type=\"text\"\n              value={email}\n              onChange={(event) => setEmail(event.target.value)}\n              placeholder=\"Email\"\n            />\n            <Input\n              className=\"mb-2\"\n              type=\"text\"\n              value={phoneNumber}\n              onChange={(event) => setPhoneNumber(event.target.value)}\n              placeholder=\"Phone Number\"\n            />\n            {(nationality === \"france\" || nationality == \"belgium\") && (\n              <div className=\"mt-2\">\n                <label className=\"text-sm text-gray-600\">\n                  Birth date\n                  <Input\n                    className=\"mb-2\"\n                    type=\"date\"\n                    value={birthDate}\n                    onChange={(event) => setBirthDate(event.target.value)}\n                    placeholder=\"Birth Date\"\n                  />\n                </label>\n              </div>\n            )}\n            {nationality === \"france\" && (\n              <Input\n                className=\"mb-2\"\n                type=\"text\"\n                value={birthPlace}\n                onChange={(event) => setBirthPlace(event.target.value)}\n                placeholder=\"Birth Place\"\n              />\n            )}\n          </div>\n          <div className=\"flex-1\">\n            {(nationality === \"austria\" ||\n              nationality == \"belgium\" ||\n              nationality == \"france\") && (\n              <Input\n                className=\"mb-2\"\n                type=\"text\"\n                value={country}\n                onChange={(event) => setCountry(event.target.value)}\n                placeholder=\"Country of residence\"\n              />\n            )}\n            {(nationality === \"austria\" ||\n              nationality == \"belgium\" ||\n              nationality == \"spain\" ||\n              nationality == \"france\") && (\n              <>\n                <Input\n                  className=\"mb-2\"\n                  type=\"text\"\n                  value={city}\n                  onChange={(event) => setCity(event.target.value)}\n                  placeholder=\"City of residence\"\n                />\n              </>\n            )}\n            {(nationality === \"spain\" || nationality == \"belgium\") && (\n              <>\n                <Input\n                  className=\"mb-2\"\n                  type=\"text\"\n                  value={address}\n                  onChange={(event) => setAddress(event.target.value)}\n                  placeholder=\"Street name, house no\"\n                />\n              </>\n            )}\n            {nationality === \"greece\" && (\n              <>\n                <label className=\"text-sm text-gray-600\">\n                  Passport Issue Date\n                  <Input\n                    type=\"date\"\n                    value={passportIssueDate}\n                    onChange={(event) =>\n                      setPassportIssueDate(event.target.value)\n                    }\n                    placeholder=\"Passport date of issue\"\n                  />\n                </label>\n                <Input\n                  className=\"mt-2 mb-2\"\n                  type=\"text\"\n                  value={passportIssueCountry}\n                  onChange={(event) =>\n                    setPassportIssueCountry(event.target.value)\n                  }\n                  placeholder=\"Passport country of issue\"\n                />\n              </>\n            )}\n            {nationality === \"austria\" ||\n              (nationality == \"greece\" && (\n                <>\n                  <Input\n                    className=\"mb-2\"\n                    type=\"text\"\n                    value={passportIssueCity}\n                    onChange={(event) =>\n                      setPassportIssueCity(event.target.value)\n                    }\n                    placeholder=\"Passport city of issue\"\n                  />\n                </>\n              ))}\n            <Input\n              className=\"mb-2\"\n              type=\"text\"\n              value={passportNumber}\n              onChange={(event) => setPassportNumber(event.target.value)}\n              placeholder=\"Passport Number\"\n            />\n            {(nationality === \"austria\" || nationality == \"greece\") && (\n              <>\n                <label className=\"text-sm text-gray-600\">\n                  Passport Expiry Date\n                  <Input\n                    className=\"mb-2\"\n                    type=\"date\"\n                    value={passportExpiryDate}\n                    onChange={(event) =>\n                      setPassportExpiryDate(event.target.value)\n                    }\n                    placeholder=\"Passport expiry date\"\n                  />\n                </label>\n              </>\n            )}\n          </div>\n        </div>\n        {!isReviewed && (\n          <label>\n            <input\n              type=\"checkbox\"\n              className=\"mr-2 mb-2\"\n              checked={isTAndCAccepted}\n              onChange={(e) => setIsTAndCAccepted(e.target.checked)}\n            />\n            Accept T&C\n          </label>\n        )}\n        <button\n          type=\"submit\"\n          className=\"w-full flex justify-between mt-4 text-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded shadow\"\n        >\n          {!isReviewed ? \"Continue\" : \"Check-In\"}\n          {loading && <Spinner />}\n        </button>\n      </form>\n    </main>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}